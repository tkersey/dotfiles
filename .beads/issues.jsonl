{"id":"df-16e","title":"Remove codex/prompts/README.md","description":"User requested removal; README isn't agent-consumed by default.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T05:44:44.197032-08:00","updated_at":"2025-12-13T13:34:31.765262-08:00","closed_at":"2025-12-12T05:44:52.604138-08:00"}
{"id":"df-3sq","title":"Make BD/PL template-free (no required memory template)","description":"## Outcome\n\n- Updated `PL` and `BD` Codex prompts to be **template-free**: they no longer require a repo to have `.beads/templates/memory.yaml`.\n- Updated global Codex agent guidance to treat `memory` as optional (use if present; otherwise create beads with explicit `description`/`design`/`acceptance`).\n\n## Why\n\nCustom bd templates are per-repo. A global planning prompt that assumes a `memory` template becomes brittle across repos. Template-free creation keeps planning flows reliable everywhere while preserving the “beads as memory” quality bar.\n\n## Where (paths / systems)\n\n- Path(s): `codex/prompts/PL.md`, `codex/prompts/BD.md`, `codex/AGENTS.md`\n- Component(s): Codex custom prompts + global agent workflow\n\n## Verification (exact commands + results)\n\n- `rg -n \"Do \\*\\*not\\*\\* assume any custom templates exist\" codex/prompts/PL.md codex/prompts/BD.md`\n- `rg -n \"create beads template-free\" codex/prompts/PL.md codex/prompts/BD.md`","design":"## Decisions + rationale\n\n- Keep `memory` templates **optional**: when present, they reduce typing; when absent, prompts still work.\n- Prefer portability: a prompt should never break because a repo hasn’t committed a template.\n\n## Alternatives considered\n\n- Auto-seed `.beads/templates/memory.yaml` into repos (self-healing templates): useful, but can be intrusive (writes files in repos that may not want committed `.beads/`).\n- Hard-require templates everywhere: rejected; brittle and breaks planning in new repos.\n\n## Constraints / invariants / gotchas\n\n- Multi-line `--description/--design/--acceptance` arguments are shell-quoting-sensitive; prefer `$(cat file)` or `bd edit` when actually running the commands.\n\n## Follow-ups\n\n- If you want the “self-healing” behavior later, add an explicit step to `PL`/`BD`: check `bd template list --json` and, if missing, create or copy the template.","acceptance_criteria":"- [ ] `codex/prompts/PL.md` and `codex/prompts/BD.md` no longer require `--from-template memory`\n- [ ] `codex/AGENTS.md` instructs: use `memory` template if present, otherwise create template-free with explicit fields","notes":"- Outcome: Made `PL`/`BD` prompts template-free; `memory` template is optional.\n- Key learnings: bd templates are per-repo; global prompts must not assume template existence.\n- Decisions + rationale: Keep template path as an optimization (if available), but always provide a non-template command path.\n- Constraints / invariants discovered: For durability across repos, prompts should avoid repo-local prerequisites.\n- Verification (exact commands + results): `rg -n \"Do \\*\\*not\\*\\* assume any custom templates exist\" codex/prompts/PL.md codex/prompts/BD.md`\n- Commands run (copy/paste safe): n/a\n- Files / symbols touched: `codex/prompts/PL.md`, `codex/prompts/BD.md`, `codex/AGENTS.md`\n- External refs (PR/commit/issues): n/a\n- Follow-ups created (ids + why): n/a\n- Search keywords / phrases: template-free, memory template optional, bd create --description","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T13:37:31.04885-08:00","updated_at":"2025-12-13T13:38:56.525034-08:00","closed_at":"2025-12-13T13:38:56.525034-08:00","labels":["memory"]}
{"id":"df-412","title":"Rename Codex prompts to .md","description":"Rename prompt files to markdown extension","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T11:51:44.849829-08:00","updated_at":"2025-12-13T13:34:31.766409-08:00","closed_at":"2025-12-06T11:52:01.019132-08:00"}
{"id":"df-4ci","title":"Make closure notes syncable (use notes, not comments)","description":"We discovered `bd export` does not include issue comments in `.beads/issues.jsonl`, so closure notes stored as comments will not sync across machines.\n\nUpdate the bead-as-memory workflow to store Closure Notes in an exported field (`notes`) instead of comments, and adjust the warm-start guidance accordingly.","design":"Approach:\n- Switch the mandatory closeout step from `bd comments add` to `bd update --notes`.\n- Keep comments as optional scratch (local-only), but require distilling into `notes` before closing.\n- Warm-start: `bd show` is sufficient because it includes `notes`; `bd comments` becomes optional.","acceptance_criteria":"- `codex/AGENTS.md` mandates Closure Notes in `notes` (not comments)\n- `codex/AGENTS.md` warm-start instructions do not require `bd comments`\n- `.beads/templates/memory.yaml` aligns (acceptance mentions notes, not comments)","notes":"Outcome:\n- Updated `codex/AGENTS.md` to require Closure Notes in the exported `notes` field (not comments).\n- Updated warm-start guidance to rely on `bd show` (which includes `notes`).\n- Updated `.beads/templates/memory.yaml` and `codex/prompts/GS.md` to match the new notes-based workflow.\n\nKey learnings:\n- `bd export` does not include issue comments in `.beads/issues.jsonl`.\n- `bd update --notes ...` *is* exported and will sync via `.beads/issues.jsonl`.\n\nDecisions + rationale:\n- Treat comments as local scratch only; require distillation into `notes`/`description`/`design` before closing.\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- In a temp bd repo: added a comment + notes, ran `bd export`, confirmed JSONL included `notes` but not comments.\n\nCommands run (copy/paste safe):\n- `bd export -o .beads/issues.jsonl`\n\nFiles / symbols touched:\n- `codex/AGENTS.md`\n- `.beads/templates/memory.yaml`\n- `codex/prompts/GS.md`\n\nExternal refs (PR/commit/issues):\n- `openai/codex` `docs/skills.md`\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- bd export comments not included\n- closure notes notes field\n- beads issues.jsonl sync notes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:45:30.573016-08:00","updated_at":"2025-12-13T13:34:31.761784-08:00","closed_at":"2025-12-13T12:47:50.27305-08:00","labels":["docs","memory"],"dependencies":[{"issue_id":"df-4ci","depends_on_id":"df-z5m","type":"discovered-from","created_at":"2025-12-13T12:45:30.575915-08:00","created_by":"daemon"}]}
{"id":"df-4wj","title":"Add Codex prompts for initiatives","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T11:44:54.104772-08:00","updated_at":"2025-12-13T13:34:31.766901-08:00","closed_at":"2025-12-06T11:46:55.982949-08:00"}
{"id":"df-5ai","title":"Restore codex prompts; align bd docs","description":"Undo prior prompt edits (BD/SI), remove revloop, and switch bd workflow docs to use bd onboard-generated guide.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T05:23:59.041366-08:00","updated_at":"2025-12-13T13:34:31.765727-08:00","closed_at":"2025-12-12T05:26:57.399063-08:00"}
{"id":"df-5t5","title":"Memory template: make closure reference portable","description":"## Outcome\n\n- Updated the `memory` template acceptance criteria to reference `AGENTS.md` / `~/.codex/AGENTS.md` instead of a repo-specific path.\n- Updated the `BD` prompt’s seeding snippet to match.\n\n## Why\n\nThe `memory` template is now seeded into arbitrary repos; it must not reference `codex/AGENTS.md` (which usually doesn’t exist outside this dotfiles repo).\n\n## Where (paths / systems)\n\n- Path(s): `.beads/templates/memory.yaml`, `codex/prompts/BD.md`\n- Component(s): bd templates, Codex prompts\n\n## Verification (exact commands + results)\n\n- `rg -n \"Closure Notes\\\" saved in `notes` \\(per `AGENTS.md`\" .beads/templates/memory.yaml codex/prompts/BD.md`","design":"## Decisions + rationale\n\n- Reference the most portable anchor: `AGENTS.md` (repo-local) with a fallback to `~/.codex/AGENTS.md` (user-global).","acceptance_criteria":"- [ ] `.beads/templates/memory.yaml` no longer mentions `codex/AGENTS.md`\n- [ ] `codex/prompts/BD.md` seeding snippet matches the template acceptance criteria","notes":"- Outcome: Made the seeded `memory` template portable by removing repo-specific `codex/AGENTS.md` references.\n- Key learnings: Anything seeded cross-repo must avoid referencing repo-local paths.\n- Verification: `rg -n \"Closure Notes\\\" saved in `notes` \\(per `AGENTS.md`\" .beads/templates/memory.yaml codex/prompts/BD.md`\n- Search keywords: portable template, closure notes, AGENTS.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T13:45:45.837476-08:00","updated_at":"2025-12-13T13:45:59.177475-08:00","closed_at":"2025-12-13T13:45:59.177475-08:00","labels":["memory"]}
{"id":"df-60o","title":"Rewrite Codex initiative prompts in markdown","description":"Convert prompts to markdown with Logophile tightening","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T11:48:28.071937-08:00","updated_at":"2025-12-13T13:34:31.766672-08:00","closed_at":"2025-12-06T11:50:42.01836-08:00"}
{"id":"df-6sa","title":"Update Clarification Expert: loop then generate beads","description":"Clarification Expert should iterate clarification loops until it has no more questions; then (without starting implementation) execute codex/prompts/BD.md to generate verbose beads via bd CLI and hard-stop. Apply to both codex/prompts/CE.md and codex/AGENTS.md CE sections; include a running summary of facts/decisions/open questions each loop.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T07:56:19.965091-08:00","updated_at":"2025-12-13T13:34:31.765019-08:00","closed_at":"2025-12-12T07:57:27.912206-08:00"}
{"id":"df-7gm","title":"AGENTS quick start: make memory template optional","description":"## Outcome\n\n- Updated `codex/AGENTS.md` Quick Start to show `memory` template usage as conditional and provide a template-free `bd create ... --description/--design/--acceptance` example.\n\n## Why\n\n`codex/AGENTS.md` is effectively global via `~/.codex/AGENTS.md`; it must not recommend commands that fail in repos lacking the custom `memory` template.\n\n## Where (paths / systems)\n\n- Path(s): `codex/AGENTS.md`\n- Component(s): global agent workflow docs\n\n## Verification (exact commands + results)\n\n- `rg -n \"template-free\" codex/AGENTS.md`","design":"## Decisions + rationale\n\n- Keep the `--from-template memory` snippet, but label it “if the repo has it”, and always show a template-free fallback.","acceptance_criteria":"- [ ] `codex/AGENTS.md` Quick Start no longer implies `memory` exists everywhere","notes":"- Outcome: Quick Start now includes a template-free `bd create ... --description/--design/--acceptance` example.\n- Key learnings: Global guidance must be portable across repos with different `.beads/templates`.\n- Verification: `rg -n \"template-free\" codex/AGENTS.md`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T13:39:52.600534-08:00","updated_at":"2025-12-13T13:40:01.760414-08:00","closed_at":"2025-12-13T13:40:01.760414-08:00","labels":["memory"]}
{"id":"df-7wp","title":"BD prompt: add --parent subtask guidance","description":"## Outcome\n\n- BD prompt now explicitly recommends using `bd create --parent \u003cepic-id\u003e` to create hierarchical child beads under epics.\n\n## Why\n\nKeep `BD` consistent with `PL` and make multi-agent planning easier (clear epic → subtask structure).\n\n## Where (paths / systems)\n\n- Path(s): `codex/prompts/BD.md`\n- Component(s): Codex custom prompts\n\n## Verification (exact commands + results)\n\n- `rg -n \"--parent \u003cepic-id\u003e\" codex/prompts/BD.md`","design":"## Decisions + rationale\n\n- Prefer creating parent/child structure at creation time via `--parent` to avoid extra dependency wiring.\n\n## Alternatives considered\n\n- Add `parent-child` links after creation with `bd dep add ... -t parent-child`: works, but is easier to forget and adds steps.\n\n## Constraints / invariants / gotchas\n\n- Do not create docs-only beads; doc work remains embedded in each bead.\n\n## Follow-ups\n\n- None.","acceptance_criteria":"- [ ] `codex/prompts/BD.md` includes a concrete `bd create --from-template memory --parent \u003cepic-id\u003e ...` example","notes":"- Outcome: Added explicit `--parent` subtask guidance to `BD` prompt for epic → child bead creation.\n- Key learnings: `bd create` supports `--parent` for hierarchical children; this is cleaner than retrofitting `parent-child` deps later.\n- Decisions + rationale: Align `BD` and `PL` so agents have one consistent “how to structure epics” pattern.\n- Constraints / invariants discovered: Keep “no docs-only beads” policy; docs requirements stay embedded per bead.\n- Verification (exact commands + results): `rg -n \"--parent \u003cepic-id\u003e\" codex/prompts/BD.md`\n- Commands run (copy/paste safe): `rg -n \"--parent \u003cepic-id\u003e\" codex/prompts/BD.md`\n- Files / symbols touched: `codex/prompts/BD.md`\n- External refs (PR/commit/issues): n/a\n- Follow-ups created (ids + why): n/a\n- Search keywords / phrases: bd create --parent, hierarchical subtasks, epic children, BD prompt","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T13:26:39.371749-08:00","updated_at":"2025-12-13T13:34:31.767186-08:00","closed_at":"2025-12-13T13:27:10.411119-08:00","labels":["memory"]}
{"id":"df-ald","title":"Parameterize GS prompt inputs","description":"## Outcome (fill/update at close)\n\n- Parameterized the `GS` prompt so you can pass a skill request as positional arguments (via `$ARGUMENTS`).\n- Added prompt frontmatter metadata (`description`, `argument-hint`) for the Codex slash prompt UI.\n\n## Why\n\nMake `/prompts:GS ...` usable as a real command: the request you type becomes part of the prompt.\n\n## Where (paths / systems)\n\n- [x] Path(s): `codex/prompts/GS.md`\n- [x] Component(s): Codex custom prompts (`~/.codex/prompts/*.md`)\n\n## Verification (exact commands + results)\n\n- [x] Command(s): `rg -n \"\\$ARGUMENTS\" codex/prompts/GS.md`\n\n## Additional Context\n\nAlso removed an accidental escaped quote in an example command (`rg -n \\\"\u003ckeyword\u003e\\\"`).","design":"## Decisions + rationale\n\n- Use `$ARGUMENTS` (positional args) instead of named placeholders so the prompt works with zero required variables.\n\n## Alternatives considered\n\n- Named placeholders like `$SPEC` or `$NAME`: rejected because Codex requires all named placeholders to be provided.\n\n## Constraints / invariants / gotchas\n\n- Avoid introducing accidental `$PLACEHOLDER` tokens in the prompt body (Codex will treat them as placeholders).\n\n## Follow-ups\n\n- None.","acceptance_criteria":"- [x] Outcome implemented\n- [x] Verification commands recorded and pass\n- [x] Bead fields are distilled (no placeholders)\n- [x] Final \"Closure Notes\" saved in `notes` (per codex/AGENTS.md)","notes":"Outcome:\n- `GS` now accepts a free-form skill request via `$ARGUMENTS` (positional args).\n\nKey learnings:\n- Codex prompt placeholders support `$1`–`$9`, `$ARGUMENTS`, and named `KEY=value` placeholders.\n- Named placeholders become required if referenced; `$ARGUMENTS` keeps the prompt usable without mandatory inputs.\n\nDecisions + rationale:\n- Use `$ARGUMENTS` for the request; avoid named placeholders.\n\nVerification (exact commands + results):\n- `rg -n \"\\$ARGUMENTS\" codex/prompts/GS.md` (found Input line)\n\nFiles / symbols touched:\n- `codex/prompts/GS.md`\n\nSearch keywords / phrases:\n- codex prompts ARGUMENTS placeholder\n- /prompts:GS usage","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:53:53.368841-08:00","updated_at":"2025-12-13T13:34:31.763756-08:00","closed_at":"2025-12-13T12:54:29.207758-08:00","labels":["docs","memory"],"dependencies":[{"issue_id":"df-ald","depends_on_id":"df-z5m","type":"discovered-from","created_at":"2025-12-13T12:53:53.372663-08:00","created_by":"daemon"}]}
{"id":"df-cnu","title":"Migrate bd prefix to dot-free df-","description":"## Outcome\n\n- Renamed this repo’s bd issue prefix from `.dotfiles-*` → `df-*`.\n- Removed “orphaned child issue” warnings that were triggered by the leading `.` in issue IDs.\n- Forced a fresh `.beads/issues.jsonl` export after rename so git-tracked JSONL matches the database.\n\n## Why\n\nA leading `.` in issue IDs caused bd’s orphan/hierarchy detection to mis-classify issues. A dot-free prefix makes bd output clean and avoids confusing warnings.\n\n## Where (paths / systems)\n\n- Systems: bd database + `.beads/issues.jsonl`\n- Path(s): `.beads/issues.jsonl`\n\n## Verification (exact commands + results)\n\n- `bd config list --json` (no orphan warning; `issue_prefix` is `df`)\n- `rg -n '\"id\":\"\\\\.dotfiles-' .beads/issues.jsonl` (no matches)","design":"## Decisions + rationale\n\n- Use the shortest dot-free prefix (`df-`) that still indicates “dotfiles”.\n- Prefer `bd rename-prefix` (built-in) over ad-hoc JSONL editing to ensure all references are updated safely.\n\n## Alternatives considered\n\n- Keep `.dotfiles-*` and ignore warnings: rejected; warnings degrade trust and signal false problems.\n- Choose a longer prefix like `dotfiles-`: rejected; exceeds bd’s max prefix length.\n\n## Constraints / invariants / gotchas\n\n- `bd export` may refuse after ID migrations due to “stale DB” safety checks; use `--force` only when you’re intentionally overwriting an out-of-date JSONL with current DB state.\n\n## Follow-ups\n\n- Consider rewriting any historical bead text that mentions `.dotfiles-*` if you want search/grep consistency (optional).","acceptance_criteria":"- [ ] `bd config list --json` shows `issue_prefix` = `df` and prints no orphan detection warnings\n- [ ] `.beads/issues.jsonl` contains only `df-*` issue IDs","notes":"- Outcome: Migrated issue IDs from `.dotfiles-*` to `df-*` via `bd rename-prefix df-`.\n- Key learnings: Leading `.` in the prefix can trip bd’s hierarchy/orphan detection; dot-free prefix avoids noisy false warnings.\n- Decisions + rationale: Used `df-` (short, dot-free, within bd prefix rules). Used `bd rename-prefix` to update IDs + references safely.\n- Constraints / invariants discovered: After rename, `bd export` may refuse due to safety checks; `bd export -o .beads/issues.jsonl --force` is appropriate when JSONL is known stale.\n- Verification (exact commands + results): `bd config list --json`; `rg -n '\"id\":\"\\\\.dotfiles-' .beads/issues.jsonl`\n- Commands run (copy/paste safe): `bd rename-prefix df-`; `bd export -o .beads/issues.jsonl --force`\n- Files / symbols touched: `.beads/issues.jsonl`\n- External refs (PR/commit/issues): n/a\n- Follow-ups created (ids + why): n/a\n- Search keywords / phrases: rename-prefix, issue_prefix, orphan detection, df-","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T13:35:24.447807-08:00","updated_at":"2025-12-13T13:35:40.133152-08:00","closed_at":"2025-12-13T13:35:40.133152-08:00","labels":["memory"]}
{"id":"df-j2p","title":"Add PL planning prompt (CE+BD)","description":"## Outcome (fill/update at close)\n\n- Added a new planning prompt `PL` that runs a full Clarification Expert loop and then creates beads in `bd`, hard-stopping before any implementation.\n- Updated `CE.md` and `BD.md` so the improved planning + bead-generation rules aren’t trapped in PL.\n\n## Why\n\nMake planning repeatable: clarify until requirements are crisp, then generate a parallelizable bead graph with documentation details embedded in each bead.\n\n## Where (paths / systems)\n\n- [x] Path(s):\n  - `codex/prompts/PL.md`\n  - `codex/prompts/CE.md`\n  - `codex/prompts/BD.md`\n- [x] Component(s): Codex custom prompts (`~/.codex/prompts/*.md`)\n\n## Verification (exact commands + results)\n\n- [x] Command(s):\n  - `test -f codex/prompts/PL.md`\n  - `rg -n \"\\$ARGUMENTS\" codex/prompts/PL.md codex/prompts/CE.md`\n\n## Additional Context\n\nPL is plan-only: it may create bd issues, but must not start code changes.","design":"## Decisions + rationale\n\n- PL uses `$ARGUMENTS` for the plan request to avoid mandatory named placeholders.\n- Bead generation defaults to `bd create --from-template memory` to keep every bead memory-rich.\n- Prefer multiple epics to increase parallelism and reduce merge conflicts.\n- Never create dedicated docs-only beads; embed doc requirements into every bead.\n\n## Alternatives considered\n\n- A two-step flow (CE then BD): rejected as the default because PL should be one command; still kept BD updated so CE can delegate.\n\n## Constraints / invariants / gotchas\n\n- Prompt files should avoid accidental `$PLACEHOLDER` tokens unless intended (Codex will treat them as placeholders).\n\n## Follow-ups\n\n- None.","acceptance_criteria":"- [x] Outcome implemented\n- [x] Verification commands recorded and pass\n- [x] Bead fields are distilled (no placeholders)\n- [x] Final \"Closure Notes\" saved in `notes` (per codex/AGENTS.md)","notes":"Outcome:\n- Added `codex/prompts/PL.md`: planning prompt that runs CE-style clarification loops, then creates beads (memory template, epics, parallelizable), then hard-stops.\n- Updated `codex/prompts/CE.md` to include optional `$ARGUMENTS` input + planning-specific reminders.\n- Rewrote `codex/prompts/BD.md` into a real bead-generation prompt focused on epics, parallelism, and embedded docs (no docs-only beads).\n\nKey learnings:\n- Codex prompts support `$ARGUMENTS` for free-form input; named placeholders become required if referenced.\n- For multi-agent coordination, epics + atomic tasks + minimal blockers is the simplest reliable structure.\n\nDecisions + rationale:\n- PL uses `$ARGUMENTS` and hard-stops after bead creation (no execution).\n- BD explicitly forbids dedicated docs-only beads; doc impact must be embedded into every bead.\n\nVerification (exact commands + results):\n- `test -f codex/prompts/PL.md`\n- `rg -n \"\\$ARGUMENTS\" codex/prompts/PL.md codex/prompts/CE.md`\n\nFiles / symbols touched:\n- `codex/prompts/PL.md`\n- `codex/prompts/CE.md`\n- `codex/prompts/BD.md`\n\nSearch keywords / phrases:\n- PL planning prompt CE BD\n- generate beads epics parallelizable\n- no docs-only bead","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T13:14:37.729552-08:00","updated_at":"2025-12-13T13:34:31.763426-08:00","closed_at":"2025-12-13T13:18:28.416347-08:00","labels":["docs","memory"]}
{"id":"df-p01","title":"Add prompts index + router guidance","description":"Create codex/prompts/README.md (or similar) that maps triggers -\u003e prompt files, documents composition order (SI/BD/WK + initiative prompts), and standardizes variable placeholders ($BEAD, etc.).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T05:28:03.95463-08:00","updated_at":"2025-12-13T13:34:31.765497-08:00","closed_at":"2025-12-12T05:35:24.284361-08:00"}
{"id":"df-sja","title":"Enhance PI prompt with 10-round skeptical gauntlet","description":"Enhance Prove It prompt to require 10 escalating skeptic rounds and explicit Oracle synthesis","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T11:15:33.227606-08:00","updated_at":"2025-12-13T13:34:31.765949-08:00","closed_at":"2025-12-07T11:15:46.758089-08:00"}
{"id":"df-tbx","title":"Map codex prompts in links.conf","description":"Add codex/prompts -\u003e ~/.codex/prompts symlink mapping","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T11:53:32.761433-08:00","updated_at":"2025-12-13T13:34:31.766189-08:00","closed_at":"2025-12-06T11:53:42.287221-08:00"}
{"id":"df-vom","title":"Add bd template for memory-rich beads","description":"Added a shared bd custom template for memory-rich beads:\n- New template: `memory` in `.beads/templates/memory.yaml`.\n- Updated codex agent guidance to recommend creating new beads via `bd create --from-template memory \"...\" --json`.\n- Updated `.gitignore` to commit `.beads/templates/*.yaml` so templates sync across clones.\n- Fixed session warm-start guidance to load both issue fields and comments (`bd show` + `bd comments`).\n\nNotes:\n- Avoid unescaped backticks when passing `--description`/`--design` inline in zsh; prefer `--description \"$(cat file)\"` or `bd edit`.","design":"Template design:\n- Description nudges the final closeout summary shape (Outcome/Why/Where/Verification).\n- Design section captures decisions, alternatives, constraints/invariants, and follow-ups.\n- Acceptance criteria enforce the memory workflow: verification recorded, placeholders removed, Closure Notes comment added.\n\nGotchas encountered:\n- Deleting an accidentally-created issue surfaced an “orphan detection” warning for `.dotfiles-*` IDs (likely due to the leading `.` in the prefix). Not investigated further.","acceptance_criteria":"- .beads/templates contains a custom memory template\n- codex/AGENTS.md recommends creating beads with --from-template\n- Template includes Outcome/Verification/Decisions/Constraints headings + closure-note reminder","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:58:56.68942-08:00","updated_at":"2025-12-13T13:34:31.76442-08:00","closed_at":"2025-12-13T11:06:36.586988-08:00","labels":["docs","memory"],"comments":[{"id":2,"issue_id":"df-vom","author":"tk","text":"Outcome:\n- Added a custom bd template `memory` for memory-rich beads.\n- Updated `codex/AGENTS.md` to recommend `bd create --from-template memory ...`.\n- Updated `.gitignore` to allow committing `.beads/templates/*.yaml` so templates sync across clones.\n\nKey learnings:\n- Custom templates live in `.beads/templates/*.yaml` and can be created via `bd template create \u003cname\u003e`.\n- Repo `.gitignore` must explicitly unignore `.beads/templates/` (unignoring only `.beads/*.jsonl` is not enough).\n\nDecisions + rationale:\n- Provide one default template (`memory`) rather than many variants to keep the “happy path” obvious.\n- Put closure-note enforcement into acceptance criteria (nudges agents to do the memory distillation before closing).\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- `bd template list --json` (confirmed `memory` template is discoverable)\n\nCommands run (copy/paste safe):\n- `bd template create memory`\n- `bd template list --json`\n\nFiles / symbols touched:\n- `.beads/templates/memory.yaml`\n- `codex/AGENTS.md`\n- `.gitignore`\n\nExternal refs (PR/commit/issues):\n- None.\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- bd template memory\n- beads memory template yaml\n- unignore .beads/templates gitignore\n","created_at":"2025-12-13T19:00:58Z"},{"id":3,"issue_id":"df-vom","author":"tk","text":"Outcome:\n- Added a custom bd template `memory` in `.beads/templates/memory.yaml`.\n- Updated `codex/AGENTS.md` to recommend `bd create --from-template memory ...`.\n- Updated `.gitignore` to allow committing `.beads/templates/*.yaml`.\n\nKey learnings:\n- Templates live in `.beads/templates/*.yaml` and are discoverable via `bd template list`.\n- In zsh, unescaped backticks inside `bd update --description/--design` will execute as command substitutions; prefer `bd edit` or `--description \"$(cat file)\"`.\n\nDecisions + rationale:\n- One general-purpose template (`memory`) is the default; add more variants only if a second pattern proves durable.\n- Enforce memory capture via acceptance criteria (verification recorded, placeholders removed, Closure Notes comment added).\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- `bd template list --json` (memory template appears)\n\nCommands run (copy/paste safe):\n- `bd template create memory`\n- `bd template list --json`\n\nFiles / symbols touched:\n- `.beads/templates/memory.yaml`\n- `codex/AGENTS.md`\n- `.gitignore`\n\nExternal refs (PR/commit/issues):\n- None.\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- bd template memory\n- beads memory template yaml\n- unignore .beads/templates gitignore\n- zsh backtick command substitution bd update\n","created_at":"2025-12-13T19:02:53Z"},{"id":4,"issue_id":"df-vom","author":"tk","text":"Warm-start should load comments too","created_at":"2025-12-13T19:06:12Z"},{"id":5,"issue_id":"df-vom","author":"tk","text":"Outcome:\n- Updated warm-start guidance to load comments as well as issue fields: `bd show` + `bd comments`.\n\nKey learnings:\n- `bd show` does not include comments; agents must call `bd comments \u003cid\u003e` to ingest Closure Notes.\n\nDecisions + rationale:\n- Keep Closure Notes in comments for high-volume learnings, but ensure the startup warm-start explicitly fetches them.\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- `bd show .dotfiles-vom --json` (confirmed issue fields)\n- `bd comments .dotfiles-vom --json` (confirmed closure notes retrievable)\n\nCommands run (copy/paste safe):\n- `bd comments .dotfiles-vom --json`\n\nFiles / symbols touched:\n- `codex/AGENTS.md`\n\nExternal refs (PR/commit/issues):\n- None.\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- warm-start bd comments\n- bd show missing comments\n","created_at":"2025-12-13T19:06:33Z"}]}
{"id":"df-vr3","title":"Enhance codex/AGENTS.md for bead-based memory","description":"Implemented bead-as-memory guidance in codex/AGENTS.md:\n- Added session-start warmup to load the 10 most recent closed beads (bd list + bd show).\n- Added mandatory closeout protocol: distill description/design/acceptance + add final Closure Notes comment.\n- Added Closure Notes template + default label taxonomy for durable recall.","design":"Key design choices:\n- Put the warm-start step in the primary Workflow section so it runs before new work.\n- Make closure notes mandatory to capture ephemeral learnings (commands, dead ends, constraints) that don’t fit cleanly in description/design.\n- Prefer over-capture + searchability (labels/keywords) over strict minimalism.","acceptance_criteria":"- codex/AGENTS.md documents session-start warmup (10 most recent closed beads)\n- codex/AGENTS.md documents a closure notes template and mandates using it\n- codex/AGENTS.md documents where to put context/decisions/commands (description/design/comments)\n- codex/AGENTS.md includes a small default label taxonomy for memory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T10:51:22.337444-08:00","updated_at":"2025-12-13T13:34:31.764743-08:00","closed_at":"2025-12-13T10:55:32.709219-08:00","labels":["docs","memory"],"comments":[{"id":1,"issue_id":"df-vr3","author":"tk","text":"Outcome:\n- Updated `codex/AGENTS.md` to treat beads as the canonical memory artifact.\n- Added a session-start warmup: read the 10 most recent closed beads via `bd list --status closed --sort closed --reverse --limit 10` + `bd show`.\n- Added a mandatory closeout protocol + Closure Notes template + default label taxonomy.\n\nKey learnings:\n- `bd list` supports `--status closed`, `--sort closed`, `--reverse`, and `--limit` for “most recent closed” retrieval.\n- `bd show \u003cid\u003e --json` is the simplest way to load a bead’s full context for agents.\n\nDecisions + rationale:\n- Put memory warmup in the core workflow so it happens before new work (reduces “what changed recently?” amnesia).\n- Require a final Closure Notes comment to avoid losing ephemeral learnings that don’t belong in `description`/`design`.\n- Ship a small default label taxonomy to make `bd search` + label filtering predictable.\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- `bd list --help` (confirmed `--sort`/`--limit` flags exist)\n- `bd show --help` (confirmed `--json` support)\n\nCommands run (copy/paste safe):\n- `bd list --help`\n- `bd show --help`\n- `bd list --status closed --sort closed --reverse --limit 10 --json`\n\nFiles / symbols touched:\n- `codex/AGENTS.md`\n\nExternal refs (PR/commit/issues):\n- None.\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- beads memory replacement\n- closure notes\n- session warmup recent closed beads\n","created_at":"2025-12-13T18:55:21Z"}]}
{"id":"df-wjl","title":"PL/BD: self-seed memory template when missing","description":"## Outcome\n\n- Updated `BD` to detect whether the `memory` template exists and seed `.beads/templates/memory.yaml` when missing.\n- Updated `PL` to require the same seeding step (referencing the canonical template content in `BD`).\n\n## Why\n\nbd templates are per-repo. If `PL`/`BD` assume `memory` exists, planning breaks in repos that haven’t committed `.beads/templates/memory.yaml`. Self-seeding makes the workflow portable while still producing memory-rich beads.\n\n## Where (paths / systems)\n\n- Path(s): `codex/prompts/BD.md`, `codex/prompts/PL.md`\n- Component(s): Codex custom prompts; bd templates\n\n## Verification (exact commands + results)\n\n- `rg -n \"Ensure the `memory` template exists\" codex/prompts/BD.md codex/prompts/PL.md`\n- `rg -n \"cat \u003e \\\\.beads/templates/memory\\\\.yaml\" codex/prompts/BD.md`","design":"## Decisions + rationale\n\n- Keep a 3-tier robustness ladder:\n  1) Use `memory` template if present.\n  2) Seed it if missing.\n  3) Fall back to template-free `bd create --description/--design/--acceptance` if seeding isn’t possible.\n\n## Alternatives considered\n\n- Hard-require templates everywhere: rejected (brittle).\n- Template-free only: acceptable, but seeding reduces friction and encourages consistent bead structure.\n\n## Constraints / invariants / gotchas\n\n- Seeding only helps other agents/clones if `.beads/templates/*.yaml` is committed; some repos may need `.gitignore` exceptions.","acceptance_criteria":"- [ ] `codex/prompts/BD.md` includes an explicit seeding step that writes `.beads/templates/memory.yaml`\n- [ ] `codex/prompts/PL.md` instructs to seed the template before creating beads","notes":"- Outcome: `BD`/`PL` can self-seed the `memory` template so planning doesn’t depend on repo-local setup.\n- Key learnings: bd templates are per-repo; portability requires either seeding or template-free commands.\n- Decisions + rationale: Prefer seeding (for consistent structure) but always keep a template-free fallback.\n- Verification: `rg -n \"cat \u003e \\\\.beads/templates/memory\\\\.yaml\" codex/prompts/BD.md`\n- Search keywords: seed template, memory.yaml, bd template list","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T13:44:44.984786-08:00","updated_at":"2025-12-13T13:45:01.111366-08:00","closed_at":"2025-12-13T13:45:01.111366-08:00","labels":["memory"]}
{"id":"df-z5m","title":"Add GS prompt for generating Codex skills","description":"Added a new Codex prompt `GS` (Generate Skills) for creating/upgrading Codex skills under `~/.codex/skills/**/SKILL.md`.\n\nPrompt includes:\n- Codex skills hard requirements (file location + required YAML keys + length limits + startup-only loading).\n- Guidance for single skills vs skill packs (gateway + INDEX.md + sub-skill docs).\n- Terse runbook-first skill body structure + progressive disclosure patterns.\n- Validation workflow: restart Codex (canonical) + optional Python preflight script.","design":"Design choices:\n- Target Codex + Claude-style compatibility by sticking to YAML-frontmatter + Markdown body and treating extra YAML keys as optional metadata.\n- Optimize descriptions for activation by encouraging concrete trigger keywords/synonyms.\n- Prefer lightweight “pack” conventions only when there are multiple independent sub-workflows.\n- Keep skill bodies terse; push deep content into `INDEX.md`, `references/`, and `tools/`.\n\nNotes:\n- Attempted to fetch Claude docs for agent skills guidance but hit redirect loops; relied on local repo skill patterns instead.","acceptance_criteria":"- `codex/prompts/GS.md` exists and reflects Codex skills spec constraints\n- Prompt provides a valid `SKILL.md` template (name/description limits)\n- Prompt includes pack/gateway + progressive disclosure guidance\n- Prompt includes a validation workflow (restart + optional preflight)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:30:13.465631-08:00","updated_at":"2025-12-13T13:34:31.764066-08:00","closed_at":"2025-12-13T12:42:17.696132-08:00","labels":["docs","memory"],"comments":[{"id":6,"issue_id":"df-z5m","author":"tk","text":"Outcome:\n- Added new prompt `GS` at `codex/prompts/GS.md` for generating Codex/Claude-style compatible skills.\n\nKey learnings:\n- Codex skills are discovered only from `~/.codex/skills/**/SKILL.md` and loaded once at startup.\n- Frontmatter requirements are minimal but strict: YAML `name` (\u003c=100 chars) and `description` (\u003c=500 chars), both one-line; extra keys are ignored.\n- `bd show` doesn’t include comments; for “memory” use-cases, ensure your warm-start loads comments too (handled separately in AGENTS guidance).\n\nDecisions + rationale:\n- Provide a single prompt that covers both creating and upgrading skills.\n- Encourage “skill packs” only when there are multiple independent sub-workflows (gateway + INDEX + sub-skill docs).\n- Include a canonical validation step (restart Codex) plus an optional fast preflight script.\n\nConstraints / invariants discovered:\n- None.\n\nVerification (exact commands + results):\n- `test -f codex/prompts/GS.md` (file present)\n\nCommands run (copy/paste safe):\n- `curl -fsSL https://raw.githubusercontent.com/openai/codex/main/docs/skills.md`\n\nFiles / symbols touched:\n- `codex/prompts/GS.md`\n\nExternal refs (PR/commit/issues):\n- `openai/codex` `docs/skills.md`\n\nFollow-ups created (ids + why):\n- None.\n\nSearch keywords / phrases:\n- codex skills SKILL.md frontmatter name description\n- generate skills prompt GS\n- skill pack gateway INDEX.md\n","created_at":"2025-12-13T20:42:13Z"}]}
